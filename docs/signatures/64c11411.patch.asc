-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

- From 64c114113aaad95a7fc56a6e218ce73ff8f50c91 Mon Sep 17 00:00:00 2001
From: Sebastian Bach <sebtomba@gmail.com>
Date: Wed, 24 May 2023 17:44:32 +0200
Subject: [PATCH] [PM-6226] Rename template from project names

- ---
 Cargo.lock                           | 190 +++++++++++++--------------
 node/Cargo.toml                      |  14 +-
 node/src/chain_spec.rs               |   2 +-
 node/src/command.rs                  |   4 +-
 node/src/main.rs                     |   2 +-
 node/src/midnightrpc.rs              |   4 +-
 node/src/rpc.rs                      |   4 +-
 node/src/service.rs                  |   6 +-
 pallets/midnight/Cargo.toml          |   2 +-
 pallets/midnight/src/benchmarking.rs |   6 +-
 runtime/Cargo.toml                   |   4 +-
 runtime/src/lib.rs                   |   9 +-
 12 files changed, 123 insertions(+), 124 deletions(-)

diff --git a/Cargo.lock b/Cargo.lock
index f7c17b5b..514f5e2d 100644
- --- a/Cargo.lock
+++ b/Cargo.lock
@@ -4558,6 +4558,101 @@ dependencies = [
  "tracing-subscriber 0.3.17",
 ]
 
+[[package]]
+name = "midnight-node"
+version = "4.0.0-dev"
+dependencies = [
+ "ciborium",
+ "clap",
+ "cranelift-codegen 0.91.1",
+ "frame-benchmarking",
+ "frame-benchmarking-cli",
+ "frame-system",
+ "futures",
+ "hex",
+ "jsonrpsee",
+ "midnight-base-crypto",
+ "midnight-lares-compitales",
+ "midnight-ledger",
+ "midnight-node-runtime",
+ "midnight-storage",
+ "pallet-transaction-payment",
+ "pallet-transaction-payment-rpc",
+ "rand 0.8.5",
+ "sc-basic-authorship",
+ "sc-cli",
+ "sc-client-api",
+ "sc-consensus",
+ "sc-consensus-aura",
+ "sc-executor",
+ "sc-finality-grandpa",
+ "sc-keystore",
+ "sc-rpc",
+ "sc-rpc-api",
+ "sc-service",
+ "sc-telemetry",
+ "sc-transaction-pool",
+ "sc-transaction-pool-api",
+ "serde",
+ "serde_json",
+ "sp-api",
+ "sp-block-builder",
+ "sp-blockchain",
+ "sp-consensus",
+ "sp-consensus-aura",
+ "sp-core",
+ "sp-finality-grandpa",
+ "sp-inherents",
+ "sp-io",
+ "sp-keyring",
+ "sp-runtime",
+ "sp-timestamp",
+ "substrate-build-script-utils",
+ "substrate-frame-rpc-system",
+ "time 0.2.27",
+ "try-runtime-cli",
+ "wasmtime 6.0.2",
+]
+
+[[package]]
+name = "midnight-node-runtime"
+version = "4.0.0-dev"
+dependencies = [
+ "frame-benchmarking",
+ "frame-executive",
+ "frame-support",
+ "frame-system",
+ "frame-system-benchmarking",
+ "frame-system-rpc-runtime-api",
+ "frame-try-runtime",
+ "pallet-aura",
+ "pallet-balances",
+ "pallet-grandpa",
+ "pallet-midnight",
+ "pallet-nicks",
+ "pallet-randomness-collective-flip",
+ "pallet-sudo",
+ "pallet-timestamp",
+ "pallet-transaction-payment",
+ "pallet-transaction-payment-rpc-runtime-api",
+ "parity-scale-codec",
+ "scale-info",
+ "serde",
+ "serde_json",
+ "sp-api",
+ "sp-block-builder",
+ "sp-consensus-aura",
+ "sp-core",
+ "sp-inherents",
+ "sp-offchain",
+ "sp-runtime",
+ "sp-session",
+ "sp-std",
+ "sp-transaction-pool",
+ "sp-version",
+ "substrate-wasm-builder",
+]
+
 [[package]]
 name = "midnight-storage"
 version = "0.1.0"
@@ -4868,101 +4963,6 @@ dependencies = [
  "memoffset 0.6.5",
 ]
 
- -[[package]]
- -name = "node-template"
- -version = "4.0.0-dev"
- -dependencies = [
- - "ciborium",
- - "clap",
- - "cranelift-codegen 0.91.1",
- - "frame-benchmarking",
- - "frame-benchmarking-cli",
- - "frame-system",
- - "futures",
- - "hex",
- - "jsonrpsee",
- - "midnight-base-crypto",
- - "midnight-lares-compitales",
- - "midnight-ledger",
- - "midnight-storage",
- - "node-template-runtime",
- - "pallet-transaction-payment",
- - "pallet-transaction-payment-rpc",
- - "rand 0.8.5",
- - "sc-basic-authorship",
- - "sc-cli",
- - "sc-client-api",
- - "sc-consensus",
- - "sc-consensus-aura",
- - "sc-executor",
- - "sc-finality-grandpa",
- - "sc-keystore",
- - "sc-rpc",
- - "sc-rpc-api",
- - "sc-service",
- - "sc-telemetry",
- - "sc-transaction-pool",
- - "sc-transaction-pool-api",
- - "serde",
- - "serde_json",
- - "sp-api",
- - "sp-block-builder",
- - "sp-blockchain",
- - "sp-consensus",
- - "sp-consensus-aura",
- - "sp-core",
- - "sp-finality-grandpa",
- - "sp-inherents",
- - "sp-io",
- - "sp-keyring",
- - "sp-runtime",
- - "sp-timestamp",
- - "substrate-build-script-utils",
- - "substrate-frame-rpc-system",
- - "time 0.2.27",
- - "try-runtime-cli",
- - "wasmtime 6.0.2",
- -]
- -
- -[[package]]
- -name = "node-template-runtime"
- -version = "4.0.0-dev"
- -dependencies = [
- - "frame-benchmarking",
- - "frame-executive",
- - "frame-support",
- - "frame-system",
- - "frame-system-benchmarking",
- - "frame-system-rpc-runtime-api",
- - "frame-try-runtime",
- - "pallet-aura",
- - "pallet-balances",
- - "pallet-grandpa",
- - "pallet-midnight",
- - "pallet-nicks",
- - "pallet-randomness-collective-flip",
- - "pallet-sudo",
- - "pallet-timestamp",
- - "pallet-transaction-payment",
- - "pallet-transaction-payment-rpc-runtime-api",
- - "parity-scale-codec",
- - "scale-info",
- - "serde",
- - "serde_json",
- - "sp-api",
- - "sp-block-builder",
- - "sp-consensus-aura",
- - "sp-core",
- - "sp-inherents",
- - "sp-offchain",
- - "sp-runtime",
- - "sp-session",
- - "sp-std",
- - "sp-transaction-pool",
- - "sp-version",
- - "substrate-wasm-builder",
- -]
- -
 [[package]]
 name = "nohash-hasher"
 version = "0.2.0"
diff --git a/node/Cargo.toml b/node/Cargo.toml
index 1b04566c..8c21f563 100644
- --- a/node/Cargo.toml
+++ b/node/Cargo.toml
@@ -1,7 +1,7 @@
 [package]
- -name = "node-template"
+name = "midnight-node"
 version = "4.0.0-dev"
- -description = "A fresh FRAME-based Substrate node, ready for hacking."
+description = "Midnight blockchain node"
 authors = ["Substrate DevHub <https://github.com/substrate-developer-hub>"]
 homepage = "https://substrate.io/"
 edition = "2021"
@@ -14,7 +14,7 @@ build = "build.rs"
 targets = ["x86_64-unknown-linux-gnu"]
 
 [[bin]]
- -name = "node-template"
+name = "midnight-node"
 
 [dependencies]
 clap = { version = "4.0.9", features = ["derive"] }
@@ -54,7 +54,7 @@ sp-keyring = { version = "7.0.0", git = "https://github.com/paritytech/substrate
 frame-system = { version = "4.0.0-dev", git = "https://github.com/paritytech/substrate.git", branch = "polkadot-v0.9.37" }
 pallet-transaction-payment = { version = "4.0.0-dev", default-features = false, git = "https://github.com/paritytech/substrate.git", branch = "polkadot-v0.9.37" }
 
- -# These dependencies are used for the node template's RPCs
+# These dependencies are used for the node's RPCs
 jsonrpsee = { version = "0.16.2", features = ["server"] }
 sc-rpc = { version = "4.0.0-dev", git = "https://github.com/paritytech/substrate.git", branch = "polkadot-v0.9.37" }
 sp-api = { version = "4.0.0-dev", git = "https://github.com/paritytech/substrate.git", branch = "polkadot-v0.9.37" }
@@ -70,7 +70,7 @@ frame-benchmarking = { version = "4.0.0-dev", git = "https://github.com/parityte
 frame-benchmarking-cli = { version = "4.0.0-dev", git = "https://github.com/paritytech/substrate.git", branch = "polkadot-v0.9.37" }
 
 # Local Dependencies
- -node-template-runtime = { version = "4.0.0-dev", path = "../runtime" }
+midnight-node-runtime = { version = "4.0.0-dev", path = "../runtime" }
 
 # CLI-specific dependencies
 try-runtime-cli = { version = "0.10.0-dev", optional = true, git = "https://github.com/paritytech/substrate.git", branch = "polkadot-v0.9.37" }
@@ -87,10 +87,10 @@ substrate-build-script-utils = { version = "3.0.0", git = "https://github.com/pa
 default = []
 # Dependencies that are only required if runtime benchmarking should be build.
 runtime-benchmarks = [
- -	"node-template-runtime/runtime-benchmarks",
+	"midnight-node-runtime/runtime-benchmarks",
 	"frame-benchmarking/runtime-benchmarks",
 	"frame-benchmarking-cli/runtime-benchmarks",
 ]
 # Enable features that allow the runtime to be tried and debugged. Name might be subject to change
 # in the near future.
- -try-runtime = ["node-template-runtime/try-runtime", "try-runtime-cli/try-runtime"]
+try-runtime = ["midnight-node-runtime/try-runtime", "try-runtime-cli/try-runtime"]
diff --git a/node/src/chain_spec.rs b/node/src/chain_spec.rs
index ff375d6f..ed40d949 100644
- --- a/node/src/chain_spec.rs
+++ b/node/src/chain_spec.rs
@@ -1,4 +1,4 @@
- -use node_template_runtime::{
+use midnight_node_runtime::{
 	AccountId, AuraConfig, GenesisConfig, GrandpaConfig, Signature, SystemConfig,
 };
 use sc_service::ChainType;
diff --git a/node/src/command.rs b/node/src/command.rs
index a7a1c22b..48b35c7f 100644
- --- a/node/src/command.rs
+++ b/node/src/command.rs
@@ -3,7 +3,7 @@ use crate::{
 	cli::{Cli, Subcommand},
 	service,
 };
- -use node_template_runtime::Block;
+use midnight_node_runtime::Block;
 use sc_cli::{ChainSpec, RuntimeVersion, SubstrateCli};
 use sc_service::PartialComponents;
 
@@ -42,7 +42,7 @@ impl SubstrateCli for Cli {
 	}
 
 	fn native_runtime_version(_: &Box<dyn ChainSpec>) -> &'static RuntimeVersion {
- -		&node_template_runtime::VERSION
+		&midnight_node_runtime::VERSION
 	}
 }
 
diff --git a/node/src/main.rs b/node/src/main.rs
index c3f46e6c..494ff568 100644
- --- a/node/src/main.rs
+++ b/node/src/main.rs
@@ -1,4 +1,4 @@
- -//! Substrate Node Template CLI library.
+//! Midnight Node CLI library.
 #![warn(missing_docs)]
 
 mod chain_spec;
diff --git a/node/src/midnightrpc.rs b/node/src/midnightrpc.rs
index 0a03feac..165803e8 100644
- --- a/node/src/midnightrpc.rs
+++ b/node/src/midnightrpc.rs
@@ -6,7 +6,7 @@ use std::{
 use jsonrpsee::{core::RpcResult, proc_macros::rpc, types::error::CallError};
 use ledger::structure::Transaction;
 use midnight_base_crypto::proofs::Proof;
- -use node_template_runtime::midnight_api::MidnightRuntimeApi;
+use midnight_node_runtime::midnight_api::MidnightRuntimeApi;
 use sc_client_api::BlockBackend;
 use sp_api::ProvideRuntimeApi;
 use sp_blockchain::HeaderBackend;
@@ -33,7 +33,7 @@ impl<A, B> Midnight<A, B> {
 	}
 }
 
- -use node_template_runtime::TransactionType;
+use midnight_node_runtime::TransactionType;
 use serde::{Deserialize, Serialize};
 use serde_json::{from_str, to_string};
 
diff --git a/node/src/rpc.rs b/node/src/rpc.rs
index 59553364..114c3b15 100644
- --- a/node/src/rpc.rs
+++ b/node/src/rpc.rs
@@ -8,14 +8,14 @@
 use std::sync::Arc;
 
 use jsonrpsee::RpcModule;
- -use node_template_runtime::{opaque::BlockForCli, AccountId, Index};
+use midnight_node_runtime::{opaque::BlockForCli, AccountId, Index};
 use sc_client_api::BlockBackend;
 use sc_transaction_pool_api::TransactionPool;
 use sp_api::ProvideRuntimeApi;
 use sp_block_builder::BlockBuilder;
 use sp_blockchain::{Error as BlockChainError, HeaderBackend, HeaderMetadata};
 
- -use node_template_runtime::midnight_api::MidnightRuntimeApi;
+use midnight_node_runtime::midnight_api::MidnightRuntimeApi;
 pub use sc_rpc_api::DenyUnsafe;
 
 /// Full client dependencies.
diff --git a/node/src/service.rs b/node/src/service.rs
index 724bb494..85a74079 100644
- --- a/node/src/service.rs
+++ b/node/src/service.rs
@@ -1,6 +1,6 @@
 //! Service and ServiceFactory implementation. Specialized wrapper over substrate service.
 
- -use node_template_runtime::{self, opaque::BlockForCli, RuntimeApi};
+use midnight_node_runtime::{self, opaque::BlockForCli, RuntimeApi};
 use sc_client_api::BlockBackend;
 use sc_consensus_aura::{ImportQueueParams, SlotProportion, StartAuraParams};
 pub use sc_executor::NativeElseWasmExecutor;
@@ -23,11 +23,11 @@ impl sc_executor::NativeExecutionDispatch for ExecutorDispatch {
 	type ExtendHostFunctions = ();
 
 	fn dispatch(method: &str, data: &[u8]) -> Option<Vec<u8>> {
- -		node_template_runtime::api::dispatch(method, data)
+		midnight_node_runtime::api::dispatch(method, data)
 	}
 
 	fn native_version() -> sc_executor::NativeVersion {
- -		node_template_runtime::native_version()
+		midnight_node_runtime::native_version()
 	}
 }
 
diff --git a/pallets/midnight/Cargo.toml b/pallets/midnight/Cargo.toml
index 7dd3b0fc..88e67e06 100644
- --- a/pallets/midnight/Cargo.toml
+++ b/pallets/midnight/Cargo.toml
@@ -2,7 +2,7 @@
 #name of the pallet
 name = "pallet-midnight"
 version = "4.0.0-dev"
- -description = "FRAME pallet template for defining custom runtime logic."
+description = "FRAME pallet defining Midnight custom runtime logic."
 authors = ["Substrate DevHub <https://github.com/substrate-developer-hub>"]
 homepage = "https://substrate.io"
 edition = "2021"
diff --git a/pallets/midnight/src/benchmarking.rs b/pallets/midnight/src/benchmarking.rs
index d496a9fc..20ac2912 100644
- --- a/pallets/midnight/src/benchmarking.rs
+++ b/pallets/midnight/src/benchmarking.rs
@@ -1,9 +1,9 @@
- -//! Benchmarking setup for pallet-template
+//! Benchmarking setup for pallet-midnight
 
 use super::*;
 
 #[allow(unused)]
- -use crate::Pallet as Template;
+use crate::Pallet as Midnight;
 use frame_benchmarking::{benchmarks, whitelisted_caller};
 use frame_system::RawOrigin;
 
@@ -16,5 +16,5 @@ benchmarks! {
 		assert_eq!(Something::<T>::get(), Some(s));
 	}
 
- -	impl_benchmark_test_suite!(Template, crate::mock::new_test_ext(), crate::mock::Test);
+	impl_benchmark_test_suite!(Midnight, crate::mock::new_test_ext(), crate::mock::Test);
 }
diff --git a/runtime/Cargo.toml b/runtime/Cargo.toml
index 43c5a115..a63e7840 100644
- --- a/runtime/Cargo.toml
+++ b/runtime/Cargo.toml
@@ -1,5 +1,5 @@
 [package]
- -name = "node-template-runtime"
+name = "midnight-node-runtime"
 version = "4.0.0-dev"
 description = "A fresh FRAME-based Substrate node, ready for hacking."
 authors = ["Substrate DevHub <https://github.com/substrate-developer-hub>"]
@@ -42,7 +42,7 @@ sp-std = { version = "5.0.0", default-features = false, git = "https://github.co
 sp-transaction-pool = { version = "4.0.0-dev", default-features = false, git = "https://github.com/paritytech/substrate.git", branch = "polkadot-v0.9.37" }
 sp-version = { version = "5.0.0", default-features = false, git = "https://github.com/paritytech/substrate.git", branch = "polkadot-v0.9.37" }
 
- -# Used for the node template's RPCs
+# Used for the node's RPCs
 frame-system-rpc-runtime-api = { version = "4.0.0-dev", default-features = false, git = "https://github.com/paritytech/substrate.git", branch = "polkadot-v0.9.37" }
 pallet-transaction-payment-rpc-runtime-api = { version = "4.0.0-dev", default-features = false, git = "https://github.com/paritytech/substrate.git", branch = "polkadot-v0.9.37" }
 
diff --git a/runtime/src/lib.rs b/runtime/src/lib.rs
index b69c8d95..deb8ad8b 100644
- --- a/runtime/src/lib.rs
+++ b/runtime/src/lib.rs
@@ -43,7 +43,7 @@ pub use pallet_timestamp::Call as TimestampCall;
 pub use sp_runtime::BuildStorage;
 pub use sp_runtime::{Perbill, Permill};
 
- -/// Import the template pallet.
+/// Import the midnight pallet.
 pub use pallet_midnight;
 
 /// An index to a block.
@@ -93,8 +93,8 @@ pub mod opaque {
 // https://docs.substrate.io/main-docs/build/upgrade#runtime-versioning
 #[sp_version::runtime_version]
 pub const VERSION: RuntimeVersion = RuntimeVersion {
- -	spec_name: create_runtime_str!("node-template"),
- -	impl_name: create_runtime_str!("node-template"),
+	spec_name: create_runtime_str!("midnight-node"),
+	impl_name: create_runtime_str!("midnight-node"),
 	authoring_version: 1,
 	// The version of the runtime specification. A full node will not attempt to use its native
 	//   runtime in substitute for the on-chain Wasm runtime unless all of `spec_name`,
@@ -241,7 +241,7 @@ impl pallet_timestamp::Config for Runtime {
 /// Existential deposit.
 pub const EXISTENTIAL_DEPOSIT: u128 = 500;
 
- -/// Configure the pallet-template in pallets/template.
+/// Configure the pallet-midnight in pallets/midnight.
 impl pallet_midnight::Config for Runtime {
 	type RuntimeEvent = RuntimeEvent;
 }
@@ -259,7 +259,6 @@ construct_runtime!(
 		Timestamp: pallet_timestamp,
 		Aura: pallet_aura,
 		Grandpa: pallet_grandpa,
- -		//todo Include the custom logic from the pallet-template in the runtime.
 		MidnightModule: pallet_midnight,
 	}
 );
- -- 
2.46.0

-----BEGIN PGP SIGNATURE-----

iQIzBAEBCAAdFiEE9Oz16eF+Nv5C7TpSdEmbFI1hGmwFAmhtArMACgkQdEmbFI1h
Gmxn4w//cwYqJDz4/0SNmQDhRk/9Bk9Ri/FVoh8n4MOA849+bDW2mv9ecLoueMgZ
jAph/pCZ8jkQqx91O2nUBEKlmfhp+Mt6c6s4OJrwbfzC1gr4GZgL7aLV/Q0R5mgi
K33CA/aJIsr3h0ikj8r5jqj/s4IBm6ANqIvPR2Fl5+6Emd5oxF3wWVzD8vZx1CuE
1LvbaM/DY7GSog0h9i3cJor2PX5FrmPE3FTicDrdHN+kiaqe6i4vu/oGoCigXQ6k
xLz+JXDPA87WZ3zFoCYmM/JxGbudSm8L+QAH1tGMwG8TyrhW/8+2ebQfmA4VSRsb
/JoK7guPmii8o6yWS/3ee0YE2tx2NULY2t7T3GUM+nqL9hZCM0jlQXQCWyEf7ewq
kcAOOSBLXWryYtscZExeTZvIN12w08RG8s3eUYrNYRapSFrxWAYJpqxAXgI79/YY
ZDBA2dD6xPAo27aItJidKSYH39JKDs7a1LG2KhjgSZ5O8zWAlJy+zvSDvY8nYuN/
/f9LLTSkiDDga7ayjwrSEUEnuEmHVDT+bDFPkA9VnKSsP7CL0GgELz+g4Yil/SkA
6SRIpwRxZQ+yngLWJHNTKpWbnOxSkmKFWHF/so+4C+0TnSMMspAYl1qQSxlEiHXI
RKX8wJcHHUtLMCPQo3b9KKxMCu3ldVp/VqZ12SzjxuNcKw/wAqM=
=9cBn
-----END PGP SIGNATURE-----
